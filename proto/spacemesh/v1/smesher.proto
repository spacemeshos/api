syntax = "proto3";
package spacemesh.v1;
option go_package = "github.com/spacemeshos/api/release/go/spacemesh/v1";
import "google/protobuf/empty.proto";
import "spacemesh/v1/smesher_types.proto";

service SmesherService {
    // Returns true iff node is currently smeshing
    rpc IsSmeshing (google.protobuf.Empty) returns (IsSmeshingResponse);

    // Starts smeshing, after completing the PoST setup.
    // Changing of the PoST setup options (e.g., number of units), after initial setup, is supported.
    // Returns success if request is accepted by node , failure if it fails
    rpc StartSmeshing (StartSmeshingRequest) returns (StartSmeshingResponse);

    // Stops smeshing, or the preceding PoST setup session, and optionally attempt to
    // delete the PoST setup data files(s).
    // Returns success if request is accepted by node, failure if it fails
    rpc StopSmeshing (StopSmeshingRequest) returns (StopSmeshingResponse);

    // Get the current smesher id generated by the node
    rpc SmesherID (google.protobuf.Empty) returns (SmesherIDResponse);

    // Get the current coinbase
    rpc Coinbase (google.protobuf.Empty) returns (CoinbaseResponse);

    // Set the coinbase
    // Returns success if request succeeds, failure if it fails
    rpc SetCoinbase (SetCoinbaseRequest) returns (SetCoinbaseResponse);

    // Get the current min gas for including txs in blocks by this smesher
    rpc MinGas (google.protobuf.Empty) returns (MinGasResponse);

    // Set a min gas units for including txs in blocks by this smesher
    // Returns success if request succeeds, failure if it fails
    rpc SetMinGas (SetMinGasRequest) returns (SetMinGasResponse);

    // Estimate smeshing rewards over the next upcoming epoch
    rpc EstimatedRewards (EstimatedRewardsRequest) returns (EstimatedRewardsResponse);

    // Returns the PoST setup status
    rpc PoSTSetupStatus (google.protobuf.Empty) returns (PoSTSetupStatusResponse);

    // Returns a stream of updates for the PoST setup status
    rpc PoSTSetupStatusStream (google.protobuf.Empty) returns (stream PoSTSetupStatusStreamResponse);

    // Returns a list of available PoST setup compute providers
    rpc PoSTSetupComputeProviders (PoSTSetupComputeProvidersRequest) returns (PoSTSetupComputeProvidersResponse);

    // Returns the PoST protocol config
    rpc PoSTConfig (google.protobuf.Empty) returns (PoSTConfigResponse);

}

